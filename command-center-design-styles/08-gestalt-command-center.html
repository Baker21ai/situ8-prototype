<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SITU8 Command Center - Gestalt Principles</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Gestalt Color Palette - Optimized for Visual Perception */
            --gestalt-bg: #F8FAFC;
            --gestalt-surface: #FFFFFF;
            --gestalt-primary: #1E293B;
            --gestalt-secondary: #475569;
            --gestalt-tertiary: #64748B;
            --gestalt-quaternary: #94A3B8;
            --gestalt-accent: #3B82F6;
            --gestalt-accent-light: #DBEAFE;
            
            /* Figure-Ground Colors */
            --gestalt-figure: #0F172A;
            --gestalt-ground: #F1F5F9;
            --gestalt-boundary: #E2E8F0;
            
            /* Status Colors - Designed for Similarity Principle */
            --gestalt-critical: #DC2626;
            --gestalt-critical-light: #FCA5A5;
            --gestalt-critical-bg: #FEF2F2;
            --gestalt-warning: #D97706;
            --gestalt-warning-light: #FBBF24;
            --gestalt-warning-bg: #FFFBEB;
            --gestalt-success: #059669;
            --gestalt-success-light: #34D399;
            --gestalt-success-bg: #ECFDF5;
            --gestalt-info: #0284C7;
            --gestalt-info-light: #38BDF8;
            --gestalt-info-bg: #F0F9FF;
            
            /* Spacing for Proximity Principle */
            --gestalt-space-tight: 4px;
            --gestalt-space-close: 8px;
            --gestalt-space-near: 12px;
            --gestalt-space-default: 16px;
            --gestalt-space-far: 24px;
            --gestalt-space-distant: 32px;
            --gestalt-space-separate: 48px;
            
            /* Visual Grouping */
            --gestalt-group-radius: 8px;
            --gestalt-element-radius: 4px;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Inter', 'Segoe UI', sans-serif;
            background: var(--gestalt-bg);
            color: var(--gestalt-primary);
            height: 100vh;
            overflow: hidden;
            font-size: 14px;
            line-height: 1.5;
        }

        /* Gestalt Base Classes */
        
        /* Proximity Principle - Elements close together are related */
        .proximity-group {
            display: flex;
            flex-direction: column;
            gap: var(--gestalt-space-tight);
        }

        .proximity-cluster {
            display: flex;
            gap: var(--gestalt-space-close);
            align-items: center;
        }

        .proximity-separate {
            margin: var(--gestalt-space-separate) 0;
        }

        /* Similarity Principle - Similar elements are grouped */
        .similarity-primary {
            color: var(--gestalt-accent);
            font-weight: 600;
        }

        .similarity-secondary {
            color: var(--gestalt-secondary);
            font-weight: 500;
        }

        .similarity-tertiary {
            color: var(--gestalt-tertiary);
            font-weight: 400;
        }

        .similarity-shape-circle {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .similarity-shape-square {
            width: 8px;
            height: 8px;
            flex-shrink: 0;
        }

        .similarity-shape-diamond {
            width: 8px;
            height: 8px;
            transform: rotate(45deg);
            flex-shrink: 0;
        }

        /* Closure Principle - Mind completes incomplete shapes */
        .closure-container {
            position: relative;
            background: var(--gestalt-surface);
            border-radius: var(--gestalt-group-radius);
            padding: var(--gestalt-space-default);
        }

        .closure-border {
            border: 2px solid transparent;
            border-top: 2px solid var(--gestalt-boundary);
            border-left: 2px solid var(--gestalt-boundary);
            border-radius: var(--gestalt-group-radius);
        }

        .closure-partial {
            position: relative;
        }

        .closure-partial::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--gestalt-accent);
            border-radius: 2px 2px 0 0;
        }

        /* Continuity Principle - Eye follows lines and curves */
        .continuity-flow {
            display: flex;
            align-items: center;
            position: relative;
        }

        .continuity-flow::after {
            content: '';
            position: absolute;
            left: 0;
            right: 0;
            bottom: -2px;
            height: 1px;
            background: linear-gradient(90deg, var(--gestalt-accent), transparent);
        }

        .continuity-line {
            width: 100%;
            height: 1px;
            background: var(--gestalt-boundary);
            margin: var(--gestalt-space-close) 0;
        }

        /* Figure-Ground Principle - Distinguishing objects from background */
        .figure-ground-container {
            background: var(--gestalt-ground);
            position: relative;
        }

        .figure-element {
            background: var(--gestalt-surface);
            border: 1px solid var(--gestalt-boundary);
            border-radius: var(--gestalt-element-radius);
            padding: var(--gestalt-space-default);
            position: relative;
            z-index: 1;
        }

        .figure-elevated {
            box-shadow: 
                0 1px 3px rgba(15, 23, 42, 0.08),
                0 4px 6px rgba(15, 23, 42, 0.05);
            z-index: 2;
        }

        /* Common Fate Principle - Elements moving together */
        .common-fate-group {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .common-fate-group:hover {
            transform: translateY(-2px);
        }

        .common-fate-group:hover .common-fate-item {
            transform: translateY(-1px);
        }

        .common-fate-item {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Good Form (Pr√§gnanz) - Simple, organized patterns */
        .pragnanz-grid {
            display: grid;
            gap: var(--gestalt-space-default);
            align-items: start;
        }

        .pragnanz-balanced {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .pragnanz-centered {
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        /* Symmetry Principle */
        .symmetry-container {
            display: flex;
            justify-content: center;
            position: relative;
        }

        .symmetry-axis {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 1px;
            background: var(--gestalt-boundary);
            opacity: 0.3;
            transform: translateX(-50%);
        }

        .symmetry-element {
            flex: 1;
            text-align: center;
        }

        /* Header */
        .header {
            background: var(--gestalt-surface);
            border-bottom: 1px solid var(--gestalt-boundary);
            padding: var(--gestalt-space-default) var(--gestalt-space-far);
            position: relative;
            z-index: 10;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }

        .header-brand {
            display: flex;
            flex-direction: column;
            gap: var(--gestalt-space-tight);
        }

        .header h1 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--gestalt-primary);
            display: flex;
            align-items: center;
            gap: var(--gestalt-space-close);
        }

        .header-subtitle {
            font-size: 0.875rem;
            color: var(--gestalt-secondary);
            font-weight: 500;
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: var(--gestalt-space-near);
        }

        .gestalt-button {
            background: var(--gestalt-surface);
            border: 1px solid var(--gestalt-boundary);
            border-radius: var(--gestalt-element-radius);
            padding: var(--gestalt-space-close) var(--gestalt-space-default);
            font-family: inherit;
            font-size: 0.875rem;
            color: var(--gestalt-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: var(--gestalt-space-close);
        }

        .gestalt-button:hover {
            background: var(--gestalt-accent-light);
            border-color: var(--gestalt-accent);
            color: var(--gestalt-accent);
        }

        .status-indicator {
            background: var(--gestalt-critical-bg);
            color: var(--gestalt-critical);
            border: 1px solid var(--gestalt-critical-light);
            border-radius: var(--gestalt-element-radius);
            padding: var(--gestalt-space-close) var(--gestalt-space-default);
            font-size: 0.875rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: var(--gestalt-space-close);
        }

        .status-dot {
            width: 6px;
            height: 6px;
            background: var(--gestalt-critical);
            border-radius: 50%;
            animation: gestaltPulse 2s ease-in-out infinite;
        }

        @keyframes gestaltPulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(1.2); }
        }

        /* Main Layout - Applying Gestalt Principles */
        .main-layout {
            display: grid;
            grid-template-columns: 300px 1fr 300px;
            gap: var(--gestalt-space-far);
            padding: var(--gestalt-space-far);
            height: calc(100vh - 73px);
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Panel Base */
        .panel {
            background: var(--gestalt-surface);
            border-radius: var(--gestalt-group-radius);
            border: 1px solid var(--gestalt-boundary);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .panel:hover {
            box-shadow: 
                0 4px 6px rgba(15, 23, 42, 0.07),
                0 10px 15px rgba(15, 23, 42, 0.05);
        }

        .panel-header {
            background: var(--gestalt-ground);
            border-bottom: 1px solid var(--gestalt-boundary);
            padding: var(--gestalt-space-default);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .panel-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--gestalt-primary);
            display: flex;
            align-items: center;
            gap: var(--gestalt-space-close);
        }

        .panel-badge {
            background: var(--gestalt-accent-light);
            color: var(--gestalt-accent);
            padding: var(--gestalt-space-tight) var(--gestalt-space-close);
            border-radius: var(--gestalt-element-radius);
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.025em;
        }

        .panel-content {
            flex: 1;
            padding: var(--gestalt-space-default);
            overflow-y: auto;
        }

        /* Activities Panel - Demonstrating Gestalt Principles */
        .activity-group {
            margin-bottom: var(--gestalt-space-separate);
        }

        .group-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--gestalt-space-close) 0;
            border-bottom: 2px solid var(--gestalt-boundary);
            margin-bottom: var(--gestalt-space-default);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .group-header:hover {
            border-bottom-color: var(--gestalt-accent);
        }

        .group-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--gestalt-primary);
            display: flex;
            align-items: center;
            gap: var(--gestalt-space-close);
        }

        .group-count {
            background: var(--gestalt-ground);
            color: var(--gestalt-secondary);
            padding: var(--gestalt-space-tight) var(--gestalt-space-close);
            border-radius: var(--gestalt-element-radius);
            font-size: 0.75rem;
            font-weight: 600;
        }

        .activity-list {
            display: flex;
            flex-direction: column;
            gap: var(--gestalt-space-close);
        }

        .activity-item {
            background: var(--gestalt-surface);
            border: 1px solid var(--gestalt-boundary);
            border-radius: var(--gestalt-element-radius);
            padding: var(--gestalt-space-default);
            cursor: pointer;
            position: relative;
            transition: all 0.2s ease;
        }

        .activity-item:hover {
            border-color: var(--gestalt-accent);
            box-shadow: 0 2px 4px rgba(59, 130, 246, 0.1);
        }

        .activity-item.urgent {
            border-left: 4px solid var(--gestalt-critical);
            background: linear-gradient(90deg, var(--gestalt-critical-bg), var(--gestalt-surface));
            animation: gestaltUrgent 3s ease-in-out infinite;
        }

        @keyframes gestaltUrgent {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.95; }
        }

        .activity-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--gestalt-space-close);
        }

        .activity-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--gestalt-primary);
        }

        .activity-time {
            font-size: 0.75rem;
            color: var(--gestalt-tertiary);
            font-weight: 500;
        }

        .activity-footer {
            display: flex;
            align-items: center;
            gap: var(--gestalt-space-default);
        }

        .activity-location {
            font-size: 0.75rem;
            color: var(--gestalt-secondary);
            background: var(--gestalt-ground);
            padding: var(--gestalt-space-tight) var(--gestalt-space-close);
            border-radius: var(--gestalt-element-radius);
        }

        .activity-status {
            font-size: 0.75rem;
            padding: var(--gestalt-space-tight) var(--gestalt-space-close);
            border-radius: var(--gestalt-element-radius);
            font-weight: 500;
        }

        .status-critical {
            background: var(--gestalt-critical-bg);
            color: var(--gestalt-critical);
        }

        .status-warning {
            background: var(--gestalt-warning-bg);
            color: var(--gestalt-warning);
        }

        .status-success {
            background: var(--gestalt-success-bg);
            color: var(--gestalt-success);
        }

        .status-info {
            background: var(--gestalt-info-bg);
            color: var(--gestalt-info);
        }

        /* Map Panel - Figure-Ground Principle */
        .map-container {
            background: var(--gestalt-ground);
            border: 1px solid var(--gestalt-boundary);
            border-radius: var(--gestalt-element-radius);
            padding: var(--gestalt-space-default);
            margin-bottom: var(--gestalt-space-far);
            height: 200px;
        }

        .map-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: var(--gestalt-space-close);
            height: 100%;
        }

        .zone {
            background: var(--gestalt-surface);
            border: 1px solid var(--gestalt-boundary);
            border-radius: var(--gestalt-element-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--gestalt-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
        }

        .zone:hover {
            background: var(--gestalt-accent-light);
            color: var(--gestalt-accent);
            border-color: var(--gestalt-accent);
            transform: scale(1.05);
            z-index: 2;
        }

        .zone.active {
            background: var(--gestalt-critical-bg);
            color: var(--gestalt-critical);
            border-color: var(--gestalt-critical);
        }

        .zone.active::after {
            content: '';
            position: absolute;
            top: -3px;
            right: -3px;
            width: 8px;
            height: 8px;
            background: var(--gestalt-critical);
            border: 2px solid var(--gestalt-surface);
            border-radius: 50%;
            animation: gestaltBlink 1.5s ease-in-out infinite;
        }

        @keyframes gestaltBlink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.5; }
        }

        /* Guards Section - Similarity Principle */
        .guards-section {
            background: var(--gestalt-ground);
            border: 1px solid var(--gestalt-boundary);
            border-radius: var(--gestalt-element-radius);
            padding: var(--gestalt-space-default);
        }

        .guards-header {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--gestalt-primary);
            margin-bottom: var(--gestalt-space-default);
            text-align: center;
        }

        .guards-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--gestalt-space-close);
        }

        .guard-card {
            background: var(--gestalt-surface);
            border: 1px solid var(--gestalt-boundary);
            border-radius: var(--gestalt-element-radius);
            padding: var(--gestalt-space-default);
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
        }

        .guard-card:hover {
            border-color: var(--gestalt-accent);
            box-shadow: 0 2px 4px rgba(59, 130, 246, 0.1);
        }

        .guard-card.active {
            border-color: var(--gestalt-accent);
            background: var(--gestalt-accent-light);
        }

        .guard-name {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--gestalt-primary);
            margin-bottom: var(--gestalt-space-tight);
        }

        .guard-status {
            font-size: 0.75rem;
            padding: var(--gestalt-space-tight) var(--gestalt-space-close);
            border-radius: var(--gestalt-element-radius);
            font-weight: 500;
        }

        /* Timeline Panel - Continuity Principle */
        .timeline-container {
            display: flex;
            flex-direction: column;
            gap: var(--gestalt-space-default);
        }

        .timeline-item {
            display: flex;
            gap: var(--gestalt-space-default);
            padding: var(--gestalt-space-default);
            background: var(--gestalt-surface);
            border: 1px solid var(--gestalt-boundary);
            border-radius: var(--gestalt-element-radius);
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
        }

        .timeline-item:hover {
            border-color: var(--gestalt-accent);
            box-shadow: 0 2px 4px rgba(59, 130, 246, 0.1);
            transform: translateX(4px);
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background: var(--gestalt-boundary);
            border-radius: 3px 0 0 3px;
        }

        .timeline-item.critical::before {
            background: var(--gestalt-critical);
        }

        .timeline-item.warning::before {
            background: var(--gestalt-warning);
        }

        .timeline-item.success::before {
            background: var(--gestalt-success);
        }

        .timeline-item.info::before {
            background: var(--gestalt-info);
        }

        .timeline-marker {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            flex-shrink: 0;
            margin-top: 4px;
            border: 2px solid var(--gestalt-surface);
            position: relative;
        }

        .timeline-marker.critical {
            background: var(--gestalt-critical);
        }

        .timeline-marker.warning {
            background: var(--gestalt-warning);
        }

        .timeline-marker.success {
            background: var(--gestalt-success);
        }

        .timeline-marker.info {
            background: var(--gestalt-info);
        }

        .timeline-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: var(--gestalt-space-tight);
        }

        .timeline-time {
            font-size: 0.75rem;
            color: var(--gestalt-tertiary);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.025em;
        }

        .timeline-event {
            font-size: 0.875rem;
            color: var(--gestalt-primary);
            line-height: 1.4;
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--gestalt-ground);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gestalt-boundary);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--gestalt-quaternary);
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .main-layout {
                grid-template-columns: 1fr;
                grid-template-rows: auto auto auto;
                height: auto;
                min-height: calc(100vh - 73px);
            }
            
            .panel {
                max-height: 400px;
            }

            .guards-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* Animation Classes */
        .gestalt-emerge {
            animation: gestaltEmerge 0.4s ease-out;
        }

        @keyframes gestaltEmerge {
            from { 
                opacity: 0; 
                transform: translateY(10px) scale(0.98);
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1);
            }
        }

        .gestalt-focus {
            animation: gestaltFocus 0.3s ease-in-out;
        }

        @keyframes gestaltFocus {
            0%, 100% { 
                box-shadow: 0 0 0 0 rgba(59, 130, 246, 0);
            }
            50% { 
                box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.2);
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="header-brand proximity-group">
                <h1>üëÅÔ∏è SITU8 Command Center</h1>
                <div class="header-subtitle">Gestalt Principles - Visual Perception Psychology</div>
            </div>
            <div class="header-controls proximity-cluster">
                <div class="status-indicator">
                    <div class="status-dot"></div>
                    3 Critical Events
                </div>
                <button class="gestalt-button">üìª Radio</button>
                <button class="gestalt-button">‚öôÔ∏è Settings</button>
                <a href="index.html" class="gestalt-button" style="text-decoration: none;">‚Üê Gallery</a>
            </div>
        </div>
    </header>

    <main class="main-layout pragnanz-grid" style="grid-template-columns: 300px 1fr 300px;">
        <!-- Activities Panel - Proximity & Similarity -->
        <section class="panel common-fate-group">
            <div class="panel-header">
                <div class="panel-title proximity-cluster">
                    üéØ Activity Stream
                </div>
                <div class="panel-badge">Live Updates</div>
            </div>
            <div class="panel-content">
                <div class="activity-group">
                    <div class="group-header" onclick="toggleGroup('critical')">
                        <div class="group-title proximity-cluster">
                            <div class="similarity-shape-circle" style="background: var(--gestalt-critical);"></div>
                            <span class="similarity-primary">Critical Priority</span>
                        </div>
                        <div class="group-count">3</div>
                    </div>
                    <div class="activity-list" id="critical-list">
                        <div class="activity-item urgent figure-elevated">
                            <div class="activity-header pragnanz-balanced">
                                <div class="activity-title">Unauthorized Entry Detected</div>
                                <div class="activity-time">2 min ago</div>
                            </div>
                            <div class="activity-footer proximity-cluster">
                                <div class="activity-location">Zone A-3</div>
                                <div class="activity-status status-critical">Active Response</div>
                            </div>
                        </div>
                        <div class="activity-item figure-element">
                            <div class="activity-header pragnanz-balanced">
                                <div class="activity-title">Medical Emergency Response</div>
                                <div class="activity-time">5 min ago</div>
                            </div>
                            <div class="activity-footer proximity-cluster">
                                <div class="activity-location">Building C - Floor 2</div>
                                <div class="activity-status status-critical">In Progress</div>
                            </div>
                        </div>
                        <div class="activity-item figure-element">
                            <div class="activity-header pragnanz-balanced">
                                <div class="activity-title">Fire Alarm System Alert</div>
                                <div class="activity-time">8 min ago</div>
                            </div>
                            <div class="activity-footer proximity-cluster">
                                <div class="activity-location">Zone B-1</div>
                                <div class="activity-status status-warning">Investigating</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="proximity-separate"></div>

                <div class="activity-group">
                    <div class="group-header" onclick="toggleGroup('high')">
                        <div class="group-title proximity-cluster">
                            <div class="similarity-shape-square" style="background: var(--gestalt-warning);"></div>
                            <span class="similarity-secondary">High Priority</span>
                        </div>
                        <div class="group-count">5</div>
                    </div>
                    <div class="activity-list" id="high-list">
                        <div class="activity-item figure-element">
                            <div class="activity-header pragnanz-balanced">
                                <div class="activity-title">Suspicious Activity Report</div>
                                <div class="activity-time">12 min ago</div>
                            </div>
                            <div class="activity-footer proximity-cluster">
                                <div class="activity-location">Parking Lot P-2</div>
                                <div class="activity-status status-warning">Under Review</div>
                            </div>
                        </div>
                        <div class="activity-item figure-element">
                            <div class="activity-header pragnanz-balanced">
                                <div class="activity-title">Access Control Issue</div>
                                <div class="activity-time">15 min ago</div>
                            </div>
                            <div class="activity-footer proximity-cluster">
                                <div class="activity-location">Main Entrance</div>
                                <div class="activity-status status-success">Resolved</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="proximity-separate"></div>

                <div class="activity-group">
                    <div class="group-header" onclick="toggleGroup('medium')">
                        <div class="group-title proximity-cluster">
                            <div class="similarity-shape-diamond" style="background: var(--gestalt-info);"></div>
                            <span class="similarity-tertiary">Medium Priority</span>
                        </div>
                        <div class="group-count">7</div>
                    </div>
                    <div class="activity-list" id="medium-list" style="display: none;">
                        <div class="activity-item figure-element">
                            <div class="activity-header pragnanz-balanced">
                                <div class="activity-title">Routine Security Patrol</div>
                                <div class="activity-time">20 min ago</div>
                            </div>
                            <div class="activity-footer proximity-cluster">
                                <div class="activity-location">Zone A-1</div>
                                <div class="activity-status status-success">Completed</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Map & Guards Panel - Figure-Ground & Common Fate -->
        <section class="panel common-fate-group">
            <div class="panel-header">
                <div class="panel-title proximity-cluster">
                    üó∫Ô∏è Facility Overview
                </div>
                <div class="panel-badge">Real-time</div>
            </div>
            <div class="panel-content">
                <div class="map-container figure-ground-container">
                    <div class="map-grid">
                        <div class="zone active" onclick="selectZone('A-1')">Zone A-1</div>
                        <div class="zone" onclick="selectZone('A-2')">Zone A-2</div>
                        <div class="zone active" onclick="selectZone('A-3')">Zone A-3</div>
                        <div class="zone" onclick="selectZone('B-1')">Zone B-1</div>
                        <div class="zone" onclick="selectZone('B-2')">Zone B-2</div>
                        <div class="zone" onclick="selectZone('B-3')">Zone B-3</div>
                        <div class="zone" onclick="selectZone('C-1')">Zone C-1</div>
                        <div class="zone active" onclick="selectZone('C-2')">Zone C-2</div>
                        <div class="zone" onclick="selectZone('P-1')">Parking P-1</div>
                        <div class="zone" onclick="selectZone('P-2')">Parking P-2</div>
                        <div class="zone" onclick="selectZone('MAIN')">Main Entrance</div>
                        <div class="zone" onclick="selectZone('SERVER')">Server Room</div>
                    </div>
                </div>

                <div class="guards-section figure-ground-container">
                    <div class="guards-header">Security Personnel Status</div>
                    <div class="guards-grid">
                        <div class="guard-card figure-element" onclick="selectGuard('Garcia')">
                            <div class="guard-name">Garcia, M.</div>
                            <div class="guard-status status-critical">Responding</div>
                        </div>
                        <div class="guard-card figure-element" onclick="selectGuard('Chen')">
                            <div class="guard-name">Chen, L.</div>
                            <div class="guard-status status-info">Patrolling</div>
                        </div>
                        <div class="guard-card figure-element" onclick="selectGuard('Davis')">
                            <div class="guard-name">Davis, K.</div>
                            <div class="guard-status status-warning">On Break</div>
                        </div>
                        <div class="guard-card figure-element" onclick="selectGuard('Wilson')">
                            <div class="guard-name">Wilson, R.</div>
                            <div class="guard-status status-success">Available</div>
                        </div>
                        <div class="guard-card figure-element" onclick="selectGuard('Martinez')">
                            <div class="guard-name">Martinez, A.</div>
                            <div class="guard-status status-info">Patrolling</div>
                        </div>
                        <div class="guard-card figure-element" onclick="selectGuard('Brown')">
                            <div class="guard-name">Brown, T.</div>
                            <div class="guard-status status-success">Available</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Timeline Panel - Continuity & Closure -->
        <section class="panel common-fate-group">
            <div class="panel-header">
                <div class="panel-title proximity-cluster">
                    ‚è∞ Event Timeline
                </div>
                <div class="panel-badge">Live Feed</div>
            </div>
            <div class="panel-content">
                <div class="timeline-container">
                    <div class="timeline-item critical">
                        <div class="timeline-marker critical"></div>
                        <div class="timeline-content proximity-group">
                            <div class="timeline-time">2 minutes ago</div>
                            <div class="timeline-event">Garcia responding to unauthorized entry in Zone A-3. Security protocols activated.</div>
                        </div>
                    </div>

                    <div class="timeline-item critical">
                        <div class="timeline-marker critical"></div>
                        <div class="timeline-content proximity-group">
                            <div class="timeline-time">5 minutes ago</div>
                            <div class="timeline-event">Medical emergency reported in Building C. Emergency services contacted and response initiated.</div>
                        </div>
                    </div>

                    <div class="timeline-item warning">
                        <div class="timeline-marker warning"></div>
                        <div class="timeline-content proximity-group">
                            <div class="timeline-time">8 minutes ago</div>
                            <div class="timeline-event">Fire alarm triggered in Zone B-1. Investigation ongoing, no smoke detected by sensors.</div>
                        </div>
                    </div>

                    <div class="timeline-item warning">
                        <div class="timeline-marker warning"></div>
                        <div class="timeline-content proximity-group">
                            <div class="timeline-time">12 minutes ago</div>
                            <div class="timeline-event">Suspicious activity reported in Parking Lot P-2. Security patrol dispatched for assessment.</div>
                        </div>
                    </div>

                    <div class="timeline-item success">
                        <div class="timeline-marker success"></div>
                        <div class="timeline-content proximity-group">
                            <div class="timeline-time">15 minutes ago</div>
                            <div class="timeline-event">Access control malfunction at Main Entrance resolved. System restored to normal operation.</div>
                        </div>
                    </div>

                    <div class="timeline-item info">
                        <div class="timeline-marker info"></div>
                        <div class="timeline-content proximity-group">
                            <div class="timeline-time">18 minutes ago</div>
                            <div class="timeline-event">Chen completed routine patrol round in Zone A-2. All systems operational, no issues detected.</div>
                        </div>
                    </div>

                    <div class="timeline-item success">
                        <div class="timeline-marker success"></div>
                        <div class="timeline-content proximity-group">
                            <div class="timeline-time">25 minutes ago</div>
                            <div class="timeline-event">Scheduled maintenance completed in Server Room. All systems tested and operational.</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        // Gestalt interaction system emphasizing visual perception principles
        function toggleGroup(priority) {
            const list = document.getElementById(priority + '-list');
            const isHidden = list.style.display === 'none';
            
            if (isHidden) {
                list.style.display = 'flex';
                // Demonstrate emergence through common fate
                const items = list.querySelectorAll('.activity-item');
                items.forEach((item, index) => {
                    setTimeout(() => {
                        item.classList.add('gestalt-emerge');
                        setTimeout(() => item.classList.remove('gestalt-emerge'), 400);
                    }, index * 50);
                });
            } else {
                list.style.display = 'none';
            }
        }

        function selectZone(zoneName) {
            const zones = document.querySelectorAll('.zone');
            zones.forEach(zone => {
                if (zone.textContent === zoneName) {
                    zone.classList.toggle('active');
                    // Apply focus effect demonstrating figure-ground principle
                    zone.classList.add('gestalt-focus');
                    setTimeout(() => {
                        zone.classList.remove('gestalt-focus');
                    }, 300);
                }
            });
            console.log('Gestalt zone selected:', zoneName);
        }

        function selectGuard(guardName) {
            const guardCards = document.querySelectorAll('.guard-card');
            guardCards.forEach(card => {
                if (card.querySelector('.guard-name').textContent.includes(guardName)) {
                    // Demonstrate similarity principle through consistent selection behavior
                    const isActive = card.classList.contains('active');
                    guardCards.forEach(c => c.classList.remove('active'));
                    if (!isActive) {
                        card.classList.add('active');
                    }
                    // Apply gestalt focus effect
                    card.classList.add('gestalt-focus');
                    setTimeout(() => {
                        card.classList.remove('gestalt-focus');
                    }, 300);
                }
            });
            console.log('Gestalt guard selected:', guardName);
        }

        // Gestalt-based update system
        function gestaltUpdate() {
            const activities = document.querySelectorAll('.activity-item');
            const currentUrgent = document.querySelector('.activity-item.urgent');
            
            // Remove current urgency with smooth transition
            if (currentUrgent) {
                currentUrgent.classList.remove('urgent');
            }
            
            // Apply urgency using proximity principle - critical items group together
            const criticalItems = document.querySelectorAll('#critical-list .activity-item');
            if (criticalItems.length > 0 && Math.random() > 0.6) {
                const nextIndex = Math.floor(Math.random() * criticalItems.length);
                criticalItems[nextIndex].classList.add('urgent');
                // Apply emergence animation
                criticalItems[nextIndex].classList.add('gestalt-emerge');
                setTimeout(() => {
                    criticalItems[nextIndex].classList.remove('gestalt-emerge');
                }, 400);
            }
        }

        // Add timeline entries demonstrating continuity
        function addGestaltTimelineEntry() {
            const events = [
                'Security patrol cycle initiated in Zone B-3 following standard protocols.',
                'Access verification completed at secondary entrance with successful authentication.',
                'System health monitoring completed across all facility modules.',
                'Personnel shift transition completed with comprehensive status handoff.',
                'Routine security assessment finished with all areas cleared for normal operations.'
            ];
            
            const randomEvent = events[Math.floor(Math.random() * events.length)];
            const timelineContainer = document.querySelector('.timeline-container');
            const newItem = document.createElement('div');
            newItem.classList.add('timeline-item', 'info', 'gestalt-emerge');
            newItem.innerHTML = `
                <div class="timeline-marker info"></div>
                <div class="timeline-content proximity-group">
                    <div class="timeline-time">Just now</div>
                    <div class="timeline-event">${randomEvent}</div>
                </div>
            `;
            
            const firstItem = timelineContainer.querySelector('.timeline-item');
            timelineContainer.insertBefore(newItem, firstItem);
            
            // Maintain visual balance through good form principle
            const items = timelineContainer.querySelectorAll('.timeline-item');
            if (items.length > 10) {
                items[items.length - 1].remove();
            }
        }

        // Start gestalt-based operations
        setInterval(gestaltUpdate, 8000);
        setInterval(addGestaltTimelineEntry, 18000);

        // Gestalt interaction effects
        document.addEventListener('DOMContentLoaded', function() {
            const gestaltElements = document.querySelectorAll('.gestalt-button, .activity-item, .guard-card, .zone, .timeline-item');
            
            gestaltElements.forEach(element => {
                element.addEventListener('click', function() {
                    // Apply focus effect demonstrating figure-ground relationship
                    this.classList.add('gestalt-focus');
                    setTimeout(() => {
                        this.classList.remove('gestalt-focus');
                    }, 300);
                });

                // Proximity-based hover effects
                element.addEventListener('mouseenter', function() {
                    // Group related elements through visual similarity
                    const similarElements = document.querySelectorAll(`.${this.classList[0]}`);
                    similarElements.forEach(el => {
                        if (el !== this) {
                            el.style.opacity = '0.7';
                        }
                    });
                });

                element.addEventListener('mouseleave', function() {
                    // Restore normal state
                    const similarElements = document.querySelectorAll(`.${this.classList[0]}`);
                    similarElements.forEach(el => {
                        el.style.opacity = '1';
                    });
                });
            });

            // Demonstrate emergence through staggered loading
            const panels = document.querySelectorAll('.panel');
            panels.forEach((panel, index) => {
                setTimeout(() => {
                    panel.classList.add('gestalt-emerge');
                    setTimeout(() => {
                        panel.classList.remove('gestalt-emerge');
                    }, 400);
                }, index * 150);
            });

            // Common fate demonstration - panels move together on scroll
            let isScrolling = false;
            document.addEventListener('scroll', function() {
                if (!isScrolling) {
                    panels.forEach(panel => {
                        panel.classList.add('common-fate-group');
                    });
                    isScrolling = true;
                    setTimeout(() => {
                        isScrolling = false;
                        panels.forEach(panel => {
                            panel.classList.remove('common-fate-group');
                        });
                    }, 300);
                }
            });
        });

        // Visual grouping demonstration
        function demonstrateGrouping() {
            const criticalElements = document.querySelectorAll('.status-critical, .timeline-item.critical, .zone.active');
            criticalElements.forEach(element => {
                element.style.boxShadow = '0 0 0 2px rgba(220, 38, 38, 0.3)';
                setTimeout(() => {
                    element.style.boxShadow = '';
                }, 2000);
            });
        }

        // Trigger grouping demonstration periodically
        setInterval(demonstrateGrouping, 30000);
    </script>
</body>
</html>