<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Activities - Minimal Density</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Minimal Dark Theme */
            --bg: #000000;
            --bg-secondary: #0a0a0a;
            --bg-hover: #111111;
            --text: #ffffff;
            --text-dim: #666666;
            --text-muted: #444444;
            --border: #1a1a1a;
            
            /* Priority Colors - Minimal */
            --critical: #ff3333;
            --high: #ff9933;
            --medium: #ffcc33;
            --low: #33ff66;
            --info: #3366ff;
        }

        body {
            font-family: 'SF Mono', Monaco, 'Cascadia Code', monospace;
            background: var(--bg);
            color: var(--text);
            font-size: 11px;
            line-height: 1.4;
        }

        /* Header */
        .header {
            border-bottom: 1px solid var(--border);
            padding: 8px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            background: var(--bg);
            z-index: 100;
        }

        .title {
            font-size: 14px;
            font-weight: 600;
        }

        .stats {
            display: flex;
            gap: 24px;
        }

        .stat {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .stat-value {
            font-weight: 600;
        }

        .stat-label {
            color: var(--text-dim);
        }

        /* Controls Bar */
        .controls {
            border-bottom: 1px solid var(--border);
            padding: 8px 16px;
            display: flex;
            gap: 16px;
            align-items: center;
            background: var(--bg-secondary);
        }

        .control-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .control-label {
            color: var(--text-dim);
            text-transform: uppercase;
            font-size: 10px;
        }

        select, input[type="text"], button {
            background: var(--bg);
            border: 1px solid var(--border);
            color: var(--text);
            padding: 4px 8px;
            font-size: 11px;
            font-family: inherit;
            cursor: pointer;
        }

        select:hover, input:hover, button:hover {
            background: var(--bg-hover);
        }

        input[type="checkbox"] {
            cursor: pointer;
        }

        /* Activity Container */
        .activity-container {
            padding: 16px;
        }

        /* Dense List View */
        .activity-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 11px;
        }

        .activity-table th {
            text-align: left;
            padding: 4px 8px;
            border-bottom: 1px solid var(--border);
            color: var(--text-dim);
            font-weight: 500;
            text-transform: uppercase;
            font-size: 10px;
            position: sticky;
            top: 0;
            background: var(--bg);
        }

        .activity-table td {
            padding: 4px 8px;
            border-bottom: 1px solid var(--border);
            vertical-align: top;
        }

        .activity-table tr:hover {
            background: var(--bg-hover);
            cursor: pointer;
        }

        /* Priority Indicators */
        .priority {
            width: 3px;
            padding: 0;
        }

        .priority-bar {
            width: 3px;
            height: 20px;
        }

        .priority-bar.critical { background: var(--critical); }
        .priority-bar.high { background: var(--high); }
        .priority-bar.medium { background: var(--medium); }
        .priority-bar.low { background: var(--low); }

        /* Minimal Tags */
        .tags {
            display: flex;
            gap: 4px;
        }

        .tag {
            padding: 1px 4px;
            background: var(--bg-hover);
            border: 1px solid var(--border);
            font-size: 9px;
            color: var(--text-dim);
        }

        /* Time */
        .time {
            color: var(--text-muted);
            font-size: 10px;
        }

        /* Compact View Mode */
        .compact-view {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1px;
            background: var(--border);
            margin: -16px;
        }

        .compact-item {
            background: var(--bg);
            padding: 8px;
            cursor: pointer;
            position: relative;
            transition: background 0.1s;
        }

        .compact-item:hover {
            background: var(--bg-hover);
        }

        .compact-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
        }

        .compact-item.critical::before { background: var(--critical); }
        .compact-item.high::before { background: var(--high); }
        .compact-item.medium::before { background: var(--medium); }
        .compact-item.low::before { background: var(--low); }

        .compact-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 4px;
        }

        .compact-type {
            font-weight: 600;
            font-size: 10px;
        }

        .compact-location {
            color: var(--text-dim);
            font-size: 10px;
        }

        /* Ultra Dense Mode */
        .ultra-dense {
            display: flex;
            flex-wrap: wrap;
            gap: 2px;
        }

        .dense-dot {
            width: 8px;
            height: 8px;
            border-radius: 1px;
            cursor: pointer;
            transition: transform 0.1s;
        }

        .dense-dot:hover {
            transform: scale(2);
            z-index: 10;
        }

        .dense-dot.critical { background: var(--critical); }
        .dense-dot.high { background: var(--high); }
        .dense-dot.medium { background: var(--medium); }
        .dense-dot.low { background: var(--low); }

        /* Tooltip */
        .tooltip {
            position: fixed;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            padding: 8px;
            font-size: 10px;
            pointer-events: none;
            z-index: 1000;
            display: none;
            max-width: 300px;
        }

        /* View Mode Toggle */
        .view-toggle {
            display: flex;
            gap: 1px;
            background: var(--border);
        }

        .view-btn {
            padding: 4px 12px;
            background: var(--bg);
            border: none;
            color: var(--text-dim);
            cursor: pointer;
            font-size: 10px;
        }

        .view-btn.active {
            background: var(--bg-hover);
            color: var(--text);
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 40px;
            color: var(--text-dim);
        }

        /* Filters Panel */
        .filters-panel {
            position: fixed;
            right: -300px;
            top: 0;
            bottom: 0;
            width: 300px;
            background: var(--bg-secondary);
            border-left: 1px solid var(--border);
            padding: 16px;
            transition: right 0.3s;
            z-index: 200;
        }

        .filters-panel.open {
            right: 0;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .activity-table {
                font-size: 10px;
            }
            
            .activity-table th,
            .activity-table td {
                padding: 2px 4px;
            }
            
            .compact-view {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="title">ACTIVITIES</div>
        <div class="stats">
            <div class="stat">
                <span class="stat-value" id="totalCount">5000</span>
                <span class="stat-label">TOTAL</span>
            </div>
            <div class="stat">
                <span class="stat-value" id="criticalCount" style="color: var(--critical)">12</span>
                <span class="stat-label">CRITICAL</span>
            </div>
            <div class="stat">
                <span class="stat-value" id="activeCount">247</span>
                <span class="stat-label">ACTIVE</span>
            </div>
            <div class="stat">
                <span class="stat-value" id="refreshTime">LIVE</span>
                <span class="stat-label">STATUS</span>
            </div>
        </div>
    </div>

    <!-- Controls -->
    <div class="controls">
        <div class="view-toggle">
            <button class="view-btn active" onclick="setView('table')">TABLE</button>
            <button class="view-btn" onclick="setView('compact')">COMPACT</button>
            <button class="view-btn" onclick="setView('dense')">DENSE</button>
        </div>
        
        <div class="control-group">
            <label class="control-label">FILTER:</label>
            <select id="priorityFilter" onchange="applyFilters()">
                <option value="all">ALL</option>
                <option value="critical">CRITICAL</option>
                <option value="high">HIGH+</option>
                <option value="active">ACTIVE</option>
            </select>
        </div>
        
        <div class="control-group">
            <label class="control-label">SORT:</label>
            <select id="sortBy" onchange="applySort()">
                <option value="time">TIME</option>
                <option value="priority">PRIORITY</option>
                <option value="location">LOCATION</option>
                <option value="type">TYPE</option>
            </select>
        </div>
        
        <div class="control-group">
            <label class="control-label">SEARCH:</label>
            <input type="text" id="searchInput" placeholder="Type to search..." onkeyup="applySearch()">
        </div>
        
        <div class="control-group">
            <input type="checkbox" id="autoRefresh" checked>
            <label for="autoRefresh">AUTO-REFRESH</label>
        </div>
        
        <button onclick="exportData()">EXPORT</button>
        <button onclick="toggleFilters()">FILTERS</button>
    </div>

    <!-- Activity Container -->
    <div class="activity-container" id="activityContainer">
        <div class="loading">LOADING ACTIVITIES...</div>
    </div>

    <!-- Tooltip -->
    <div class="tooltip" id="tooltip"></div>

    <!-- Filters Panel -->
    <div class="filters-panel" id="filtersPanel">
        <h3>ADVANCED FILTERS</h3>
        <!-- Additional filter options would go here -->
    </div>

    <script>
        // Configuration
        let currentView = 'table';
        let activities = [];
        let filteredActivities = [];
        
        // Activity types and locations
        const activityTypes = ['BREACH', 'ALERT', 'ACCESS', 'PATROL', 'SENSOR', 'SYSTEM', 'ALARM', 'VISITOR'];
        const priorities = ['critical', 'high', 'medium', 'low'];
        const locations = ['A1', 'A2', 'A3', 'B1', 'B2', 'B3', 'C1', 'C2', 'C3', 'D1', 'D2', 'D3'];
        const buildings = ['ALPHA', 'BETA', 'GAMMA', 'DELTA', 'ECHO', 'FOXTROT'];
        const statuses = ['NEW', 'ACK', 'ACTIVE', 'RESOLVED'];

        // Generate mock activities
        function generateActivities(count = 5000) {
            const data = [];
            for (let i = 0; i < count; i++) {
                const priority = priorities[Math.floor(Math.random() * priorities.length)];
                const timestamp = new Date(Date.now() - Math.random() * 86400000);
                
                data.push({
                    id: `ACT${String(i + 1).padStart(5, '0')}`,
                    type: activityTypes[Math.floor(Math.random() * activityTypes.length)],
                    priority,
                    building: buildings[Math.floor(Math.random() * buildings.length)],
                    location: locations[Math.floor(Math.random() * locations.length)],
                    status: statuses[Math.floor(Math.random() * statuses.length)],
                    timestamp,
                    assignee: Math.random() > 0.5 ? `G${Math.floor(Math.random() * 99) + 1}` : '-',
                    confidence: Math.floor(Math.random() * 40) + 60,
                    tags: generateTags(priority)
                });
            }
            return data;
        }

        function generateTags(priority) {
            const allTags = ['AUTO', 'VERIFIED', 'FALSE+', 'ESCALATED', 'CRITICAL'];
            const count = priority === 'critical' ? 2 : priority === 'high' ? 1 : 0;
            const tags = [];
            for (let i = 0; i < count; i++) {
                tags.push(allTags[Math.floor(Math.random() * allTags.length)]);
            }
            return tags;
        }

        // View renderers
        function renderTable() {
            const container = document.getElementById('activityContainer');
            
            const table = `
                <table class="activity-table">
                    <thead>
                        <tr>
                            <th></th>
                            <th>ID</th>
                            <th>TIME</th>
                            <th>TYPE</th>
                            <th>LOCATION</th>
                            <th>STATUS</th>
                            <th>ASSIGN</th>
                            <th>CONF%</th>
                            <th>TAGS</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${filteredActivities.slice(0, 100).map(activity => `
                            <tr onclick="selectActivity('${activity.id}')">
                                <td class="priority"><div class="priority-bar ${activity.priority}"></div></td>
                                <td>${activity.id}</td>
                                <td class="time">${formatTime(activity.timestamp)}</td>
                                <td>${activity.type}</td>
                                <td>${activity.building}-${activity.location}</td>
                                <td>${activity.status}</td>
                                <td>${activity.assignee}</td>
                                <td>${activity.confidence}</td>
                                <td><div class="tags">${activity.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}</div></td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
            
            container.innerHTML = table;
        }

        function renderCompact() {
            const container = document.getElementById('activityContainer');
            
            const items = filteredActivities.slice(0, 200).map(activity => `
                <div class="compact-item ${activity.priority}" onclick="selectActivity('${activity.id}')">
                    <div class="compact-header">
                        <span class="compact-type">${activity.id} - ${activity.type}</span>
                        <span class="time">${formatTime(activity.timestamp)}</span>
                    </div>
                    <div class="compact-location">${activity.building}-${activity.location} • ${activity.status} • ${activity.confidence}%</div>
                </div>
            `).join('');
            
            container.innerHTML = `<div class="compact-view">${items}</div>`;
        }

        function renderDense() {
            const container = document.getElementById('activityContainer');
            
            const dots = filteredActivities.slice(0, 2000).map((activity, index) => `
                <div class="dense-dot ${activity.priority}" 
                     data-id="${activity.id}"
                     onmouseenter="showTooltip(event, '${activity.id}')"
                     onmouseleave="hideTooltip()"
                     onclick="selectActivity('${activity.id}')">
                </div>
            `).join('');
            
            container.innerHTML = `
                <div style="margin-bottom: 16px; color: var(--text-dim);">
                    SHOWING ${Math.min(2000, filteredActivities.length)} OF ${filteredActivities.length} ACTIVITIES
                </div>
                <div class="ultra-dense">${dots}</div>
            `;
        }

        // Utility functions
        function formatTime(date) {
            const now = new Date();
            const diff = now - date;
            const mins = Math.floor(diff / 60000);
            
            if (mins < 1) return 'NOW';
            if (mins < 60) return `${mins}M`;
            if (mins < 1440) return `${Math.floor(mins / 60)}H`;
            
            return date.toLocaleTimeString('en-US', { 
                hour: '2-digit', 
                minute: '2-digit',
                hour12: false 
            });
        }

        function setView(view) {
            currentView = view;
            document.querySelectorAll('.view-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            renderView();
        }

        function renderView() {
            switch(currentView) {
                case 'table':
                    renderTable();
                    break;
                case 'compact':
                    renderCompact();
                    break;
                case 'dense':
                    renderDense();
                    break;
            }
        }

        function applyFilters() {
            const filter = document.getElementById('priorityFilter').value;
            
            if (filter === 'all') {
                filteredActivities = [...activities];
            } else if (filter === 'critical') {
                filteredActivities = activities.filter(a => a.priority === 'critical');
            } else if (filter === 'high') {
                filteredActivities = activities.filter(a => ['critical', 'high'].includes(a.priority));
            } else if (filter === 'active') {
                filteredActivities = activities.filter(a => a.status === 'ACTIVE');
            }
            
            updateStats();
            renderView();
        }

        function applySort() {
            const sortBy = document.getElementById('sortBy').value;
            
            filteredActivities.sort((a, b) => {
                switch(sortBy) {
                    case 'priority':
                        const priorityOrder = { critical: 0, high: 1, medium: 2, low: 3 };
                        return priorityOrder[a.priority] - priorityOrder[b.priority];
                    case 'location':
                        return `${a.building}-${a.location}`.localeCompare(`${b.building}-${b.location}`);
                    case 'type':
                        return a.type.localeCompare(b.type);
                    default:
                        return b.timestamp - a.timestamp;
                }
            });
            
            renderView();
        }

        function applySearch() {
            const search = document.getElementById('searchInput').value.toUpperCase();
            
            if (search) {
                filteredActivities = activities.filter(a => 
                    a.id.includes(search) ||
                    a.type.includes(search) ||
                    a.building.includes(search) ||
                    a.location.includes(search)
                );
            } else {
                applyFilters();
            }
            
            updateStats();
            renderView();
        }

        function updateStats() {
            document.getElementById('totalCount').textContent = filteredActivities.length;
            document.getElementById('criticalCount').textContent = 
                filteredActivities.filter(a => a.priority === 'critical').length;
            document.getElementById('activeCount').textContent = 
                filteredActivities.filter(a => a.status === 'ACTIVE').length;
        }

        function selectActivity(id) {
            console.log('Selected activity:', id);
            // In real app, would show detail panel
        }

        function showTooltip(event, id) {
            const activity = activities.find(a => a.id === id);
            const tooltip = document.getElementById('tooltip');
            
            tooltip.innerHTML = `
                <strong>${activity.id} - ${activity.type}</strong><br>
                ${activity.building}-${activity.location}<br>
                ${formatTime(activity.timestamp)} • ${activity.priority.toUpperCase()}<br>
                Status: ${activity.status} • ${activity.confidence}% confidence
            `;
            
            tooltip.style.display = 'block';
            tooltip.style.left = event.pageX + 10 + 'px';
            tooltip.style.top = event.pageY + 10 + 'px';
        }

        function hideTooltip() {
            document.getElementById('tooltip').style.display = 'none';
        }

        function toggleFilters() {
            document.getElementById('filtersPanel').classList.toggle('open');
        }

        function exportData() {
            console.log('Exporting', filteredActivities.length, 'activities');
            alert('Export functionality would download CSV/JSON file');
        }

        // Initialize
        activities = generateActivities();
        filteredActivities = [...activities];
        updateStats();
        renderView();

        // Auto-refresh simulation
        setInterval(() => {
            if (document.getElementById('autoRefresh').checked) {
                // Add new activity
                const newActivity = generateActivities(1)[0];
                activities.unshift(newActivity);
                filteredActivities.unshift(newActivity);
                
                // Keep array size manageable
                if (activities.length > 5000) {
                    activities.pop();
                }
                
                updateStats();
                document.getElementById('refreshTime').textContent = 
                    new Date().toLocaleTimeString('en-US', { 
                        hour: '2-digit', 
                        minute: '2-digit', 
                        second: '2-digit',
                        hour12: false 
                    });
            }
        }, 3000);
    </script>
</body>
</html>