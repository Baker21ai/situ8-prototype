<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SITU8 Activities - Intelligence Dashboard</title>
    <style>
        /* Enterprise Design System - Bloomberg Terminal Inspired */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        :root {
            /* System Colors - High Contrast for 24/7 Operations */
            --sys-black: #000000;
            --sys-gray-950: #030712;
            --sys-gray-900: #111827;
            --sys-gray-850: #1a202c;
            --sys-gray-800: #1f2937;
            --sys-gray-700: #374151;
            --sys-gray-600: #4b5563;
            --sys-gray-500: #6b7280;
            --sys-gray-400: #9ca3af;
            --sys-gray-300: #d1d5db;
            --sys-gray-200: #e5e7eb;
            --sys-gray-100: #f3f4f6;
            --sys-white: #ffffff;
            
            /* Semantic Colors */
            --sys-red: #ef4444;
            --sys-orange: #f97316;
            --sys-amber: #f59e0b;
            --sys-yellow: #eab308;
            --sys-lime: #84cc16;
            --sys-green: #22c55e;
            --sys-emerald: #10b981;
            --sys-teal: #14b8a6;
            --sys-cyan: #06b6d4;
            --sys-sky: #0ea5e9;
            --sys-blue: #3b82f6;
            --sys-indigo: #6366f1;
            --sys-violet: #8b5cf6;
            --sys-purple: #a855f7;
            --sys-fuchsia: #d946ef;
            --sys-pink: #ec4899;
            --sys-rose: #f43f5e;
            
            /* Functional Assignments */
            --color-bg-primary: var(--sys-black);
            --color-bg-secondary: var(--sys-gray-950);
            --color-bg-tertiary: var(--sys-gray-900);
            --color-bg-elevated: var(--sys-gray-850);
            --color-bg-overlay: rgba(0, 0, 0, 0.9);
            
            --color-text-primary: var(--sys-white);
            --color-text-secondary: var(--sys-gray-300);
            --color-text-tertiary: var(--sys-gray-400);
            --color-text-muted: var(--sys-gray-500);
            
            --color-border-subtle: rgba(255, 255, 255, 0.08);
            --color-border-medium: rgba(255, 255, 255, 0.16);
            --color-border-strong: rgba(255, 255, 255, 0.24);
            
            /* Priority Mapping */
            --priority-critical: var(--sys-red);
            --priority-high: var(--sys-orange);
            --priority-medium: var(--sys-amber);
            --priority-low: var(--sys-green);
            --priority-info: var(--sys-blue);
            
            /* Motion */
            --motion-swift: 150ms cubic-bezier(0.4, 0, 0.2, 1);
            --motion-smooth: 250ms cubic-bezier(0.4, 0, 0.2, 1);
            --motion-expressive: 350ms cubic-bezier(0.4, 0, 0.6, 1);
            
            /* Layout */
            --header-height: 48px;
            --toolbar-height: 56px;
            --grid-unit: 8px;
        }

        /* Base */
        html {
            font-size: 14px;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
        }

        body {
            background: var(--color-bg-primary);
            color: var(--color-text-primary);
            line-height: 1.4;
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Performance Layer */
        .gpu {
            transform: translateZ(0);
            will-change: transform;
            backface-visibility: hidden;
        }

        /* Header Bar */
        .header {
            height: var(--header-height);
            background: var(--color-bg-secondary);
            border-bottom: 1px solid var(--color-border-subtle);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 calc(var(--grid-unit) * 2);
            flex-shrink: 0;
            position: relative;
            z-index: 100;
        }

        .header-title {
            font-size: 1.125rem;
            font-weight: 600;
            letter-spacing: -0.025em;
            display: flex;
            align-items: center;
            gap: calc(var(--grid-unit) * 1.5);
        }

        .header-stats {
            display: flex;
            gap: calc(var(--grid-unit) * 3);
        }

        .stat-item {
            display: flex;
            align-items: baseline;
            gap: calc(var(--grid-unit) * 0.5);
        }

        .stat-value {
            font-size: 1.25rem;
            font-weight: 600;
            font-variant-numeric: tabular-nums;
        }

        .stat-label {
            font-size: 0.75rem;
            color: var(--color-text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* Toolbar */
        .toolbar {
            height: var(--toolbar-height);
            background: var(--color-bg-tertiary);
            border-bottom: 1px solid var(--color-border-subtle);
            display: flex;
            align-items: center;
            padding: 0 calc(var(--grid-unit) * 2);
            gap: calc(var(--grid-unit) * 2);
            flex-shrink: 0;
        }

        .toolbar-section {
            display: flex;
            align-items: center;
            gap: calc(var(--grid-unit) * 1);
        }

        .toolbar-divider {
            width: 1px;
            height: 24px;
            background: var(--color-border-subtle);
        }

        /* Controls */
        .control-group {
            display: flex;
            align-items: center;
            gap: calc(var(--grid-unit) * 0.5);
        }

        .control-label {
            font-size: 0.75rem;
            color: var(--color-text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-right: calc(var(--grid-unit) * 0.5);
        }

        select, input[type="text"], input[type="search"] {
            background: var(--color-bg-elevated);
            border: 1px solid var(--color-border-subtle);
            color: var(--color-text-primary);
            padding: 6px 12px;
            font-size: 0.875rem;
            font-family: inherit;
            border-radius: 4px;
            outline: none;
            transition: all var(--motion-swift);
        }

        select:hover, input:hover {
            border-color: var(--color-border-medium);
        }

        select:focus, input:focus {
            border-color: var(--sys-blue);
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
        }

        button {
            background: var(--color-bg-elevated);
            border: 1px solid var(--color-border-subtle);
            color: var(--color-text-secondary);
            padding: 6px 16px;
            font-size: 0.875rem;
            font-weight: 500;
            font-family: inherit;
            border-radius: 4px;
            cursor: pointer;
            transition: all var(--motion-swift);
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        button:hover {
            background: var(--color-bg-secondary);
            border-color: var(--color-border-medium);
            color: var(--color-text-primary);
        }

        button.primary {
            background: var(--sys-blue);
            border-color: var(--sys-blue);
            color: white;
        }

        button.primary:hover {
            background: #2563eb;
            border-color: #2563eb;
        }

        /* View Mode Toggle */
        .view-toggle {
            display: flex;
            background: var(--color-bg-elevated);
            border: 1px solid var(--color-border-subtle);
            border-radius: 4px;
            overflow: hidden;
        }

        .view-toggle button {
            border: none;
            border-radius: 0;
            padding: 6px 12px;
            font-size: 0.75rem;
        }

        .view-toggle button:not(:last-child) {
            border-right: 1px solid var(--color-border-subtle);
        }

        .view-toggle button.active {
            background: var(--sys-blue);
            color: white;
        }

        /* Main Content Area */
        .content {
            flex: 1;
            overflow: hidden;
            display: flex;
            background: var(--color-bg-primary);
        }

        /* Data Grid View */
        .data-grid {
            flex: 1;
            overflow: auto;
            font-family: 'SF Mono', 'Cascadia Code', 'Roboto Mono', monospace;
            font-size: 0.75rem;
            line-height: 1.4;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th {
            position: sticky;
            top: 0;
            background: var(--color-bg-secondary);
            border-bottom: 2px solid var(--color-border-medium);
            padding: calc(var(--grid-unit) * 1) calc(var(--grid-unit) * 1.5);
            text-align: left;
            font-weight: 600;
            font-size: 0.6875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--color-text-tertiary);
            user-select: none;
            cursor: pointer;
            white-space: nowrap;
        }

        .data-table th:hover {
            background: var(--color-bg-tertiary);
            color: var(--color-text-secondary);
        }

        .data-table th.sortable::after {
            content: '‚áÖ';
            margin-left: 4px;
            opacity: 0.3;
        }

        .data-table th.sorted-asc::after {
            content: '‚Üë';
            opacity: 1;
            color: var(--sys-blue);
        }

        .data-table th.sorted-desc::after {
            content: '‚Üì';
            opacity: 1;
            color: var(--sys-blue);
        }

        .data-table td {
            padding: calc(var(--grid-unit) * 0.75) calc(var(--grid-unit) * 1.5);
            border-bottom: 1px solid var(--color-border-subtle);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 300px;
        }

        .data-table tr {
            transition: background var(--motion-swift);
        }

        .data-table tr:hover {
            background: var(--color-bg-secondary);
            cursor: pointer;
        }

        .data-table tr.selected {
            background: var(--sys-blue);
            background: rgba(59, 130, 246, 0.2);
        }

        /* Priority Indicators */
        .priority-indicator {
            display: inline-block;
            width: 3px;
            height: 12px;
            margin-right: 6px;
            vertical-align: middle;
        }

        .priority-critical { background: var(--priority-critical); }
        .priority-high { background: var(--priority-high); }
        .priority-medium { background: var(--priority-medium); }
        .priority-low { background: var(--priority-low); }

        /* Status Badges */
        .status-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 0.6875rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.025em;
        }

        .status-new {
            background: rgba(59, 130, 246, 0.2);
            color: var(--sys-blue);
        }

        .status-active {
            background: rgba(249, 115, 22, 0.2);
            color: var(--sys-orange);
        }

        .status-resolved {
            background: rgba(34, 197, 94, 0.2);
            color: var(--sys-green);
        }

        /* ML Insights Panel */
        .insights-panel {
            width: 320px;
            background: var(--color-bg-secondary);
            border-left: 1px solid var(--color-border-subtle);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .insights-header {
            padding: calc(var(--grid-unit) * 2);
            border-bottom: 1px solid var(--color-border-subtle);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .insights-title {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: calc(var(--grid-unit) * 1);
        }

        .ml-indicator {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 2px 8px;
            background: rgba(139, 92, 246, 0.2);
            border: 1px solid rgba(139, 92, 246, 0.4);
            border-radius: 4px;
            font-size: 0.625rem;
            font-weight: 600;
            color: var(--sys-violet);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .ml-indicator::before {
            content: '';
            width: 6px;
            height: 6px;
            background: var(--sys-violet);
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(1.2); }
        }

        .insights-content {
            flex: 1;
            overflow-y: auto;
            padding: calc(var(--grid-unit) * 2);
        }

        .insight-card {
            background: var(--color-bg-tertiary);
            border: 1px solid var(--color-border-subtle);
            border-radius: 6px;
            padding: calc(var(--grid-unit) * 2);
            margin-bottom: calc(var(--grid-unit) * 2);
        }

        .insight-type {
            font-size: 0.75rem;
            color: var(--color-text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: calc(var(--grid-unit) * 0.5);
        }

        .insight-value {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: calc(var(--grid-unit) * 1);
        }

        .insight-description {
            font-size: 0.875rem;
            color: var(--color-text-secondary);
            line-height: 1.5;
        }

        .insight-chart {
            margin-top: calc(var(--grid-unit) * 2);
            height: 80px;
            background: var(--color-bg-elevated);
            border-radius: 4px;
            position: relative;
            overflow: hidden;
        }

        /* Anomaly Detection */
        .anomaly-score {
            display: flex;
            align-items: center;
            gap: calc(var(--grid-unit) * 1);
            padding: calc(var(--grid-unit) * 1.5);
            background: var(--color-bg-tertiary);
            border-radius: 6px;
            margin-bottom: calc(var(--grid-unit) * 2);
        }

        .anomaly-gauge {
            width: 60px;
            height: 60px;
            position: relative;
        }

        .anomaly-gauge svg {
            transform: rotate(-90deg);
        }

        .anomaly-gauge-bg {
            fill: none;
            stroke: var(--color-bg-elevated);
            stroke-width: 8;
        }

        .anomaly-gauge-fill {
            fill: none;
            stroke: var(--sys-orange);
            stroke-width: 8;
            stroke-linecap: round;
            stroke-dasharray: 157;
            stroke-dashoffset: 157;
            transition: stroke-dashoffset var(--motion-expressive);
        }

        .anomaly-details {
            flex: 1;
        }

        .anomaly-label {
            font-size: 0.75rem;
            color: var(--color-text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .anomaly-value {
            font-size: 1.5rem;
            font-weight: 600;
        }

        /* Pattern Recognition */
        .pattern-list {
            display: flex;
            flex-direction: column;
            gap: calc(var(--grid-unit) * 1);
        }

        .pattern-item {
            display: flex;
            align-items: center;
            gap: calc(var(--grid-unit) * 1.5);
            padding: calc(var(--grid-unit) * 1.5);
            background: var(--color-bg-tertiary);
            border: 1px solid var(--color-border-subtle);
            border-radius: 4px;
            cursor: pointer;
            transition: all var(--motion-swift);
        }

        .pattern-item:hover {
            background: var(--color-bg-elevated);
            border-color: var(--color-border-medium);
        }

        .pattern-icon {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--color-bg-elevated);
            border-radius: 4px;
            font-size: 1rem;
        }

        .pattern-info {
            flex: 1;
        }

        .pattern-name {
            font-size: 0.875rem;
            font-weight: 500;
            margin-bottom: 2px;
        }

        .pattern-count {
            font-size: 0.75rem;
            color: var(--color-text-tertiary);
        }

        .pattern-confidence {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--sys-green);
        }

        /* Heat Map View */
        .heat-map-container {
            flex: 1;
            padding: calc(var(--grid-unit) * 3);
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: calc(var(--grid-unit) * 2);
            overflow-y: auto;
        }

        .heat-cell {
            aspect-ratio: 1;
            background: var(--color-bg-secondary);
            border: 1px solid var(--color-border-subtle);
            border-radius: 8px;
            padding: calc(var(--grid-unit) * 2);
            cursor: pointer;
            transition: all var(--motion-smooth);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .heat-cell::before {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at center, transparent 0%, rgba(0, 0, 0, 0.6) 100%);
            pointer-events: none;
        }

        .heat-cell:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
        }

        .heat-cell-header {
            position: relative;
            z-index: 1;
        }

        .heat-cell-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .heat-cell-subtitle {
            font-size: 0.75rem;
            color: var(--color-text-tertiary);
        }

        .heat-cell-value {
            position: relative;
            z-index: 1;
            font-size: 2.5rem;
            font-weight: 700;
            font-variant-numeric: tabular-nums;
            text-align: center;
        }

        .heat-intensity-1 { background-color: rgba(34, 197, 94, 0.1); }
        .heat-intensity-2 { background-color: rgba(234, 179, 8, 0.2); }
        .heat-intensity-3 { background-color: rgba(249, 115, 22, 0.3); }
        .heat-intensity-4 { background-color: rgba(239, 68, 68, 0.4); }
        .heat-intensity-5 { background-color: rgba(239, 68, 68, 0.6); }

        /* Timeline View */
        .timeline-view {
            flex: 1;
            padding: calc(var(--grid-unit) * 3);
            overflow-y: auto;
        }

        .timeline-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: calc(var(--grid-unit) * 3);
        }

        .timeline-scale {
            display: flex;
            gap: calc(var(--grid-unit) * 1);
        }

        .scale-button {
            padding: 4px 12px;
            font-size: 0.75rem;
        }

        .scale-button.active {
            background: var(--sys-blue);
            border-color: var(--sys-blue);
            color: white;
        }

        .timeline-track {
            position: relative;
            padding-left: 60px;
        }

        .timeline-axis {
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--color-border-medium);
        }

        .timeline-entry {
            position: relative;
            margin-bottom: calc(var(--grid-unit) * 3);
            display: flex;
            align-items: flex-start;
        }

        .timeline-marker {
            position: absolute;
            left: -69px;
            width: 60px;
            text-align: right;
            font-size: 0.75rem;
            color: var(--color-text-muted);
            font-variant-numeric: tabular-nums;
        }

        .timeline-dot {
            position: absolute;
            left: -5px;
            top: 6px;
            width: 10px;
            height: 10px;
            background: var(--color-bg-primary);
            border: 2px solid var(--sys-blue);
            border-radius: 50%;
        }

        .timeline-content {
            flex: 1;
            margin-left: calc(var(--grid-unit) * 3);
            background: var(--color-bg-secondary);
            border: 1px solid var(--color-border-subtle);
            border-radius: 6px;
            padding: calc(var(--grid-unit) * 2);
            transition: all var(--motion-swift);
        }

        .timeline-content:hover {
            background: var(--color-bg-tertiary);
            border-color: var(--color-border-medium);
        }

        /* Loading States */
        .skeleton {
            background: linear-gradient(90deg, 
                var(--color-bg-secondary) 0%, 
                var(--color-bg-tertiary) 50%, 
                var(--color-bg-secondary) 100%);
            background-size: 200% 100%;
            animation: skeleton 1.5s ease-in-out infinite;
            border-radius: 4px;
        }

        @keyframes skeleton {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Quick Actions */
        .quick-actions {
            position: fixed;
            bottom: calc(var(--grid-unit) * 3);
            right: calc(var(--grid-unit) * 3);
            display: flex;
            flex-direction: column;
            gap: calc(var(--grid-unit) * 1);
            z-index: 1000;
        }

        .action-fab {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: var(--sys-blue);
            border: none;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
            transition: all var(--motion-swift);
        }

        .action-fab:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.6);
        }

        .action-fab.emergency {
            background: var(--sys-red);
            animation: emergencyPulse 1s ease-in-out infinite;
        }

        @keyframes emergencyPulse {
            0%, 100% { 
                box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
            }
            50% { 
                box-shadow: 0 4px 20px rgba(239, 68, 68, 0.8);
            }
        }

        /* Responsive */
        @media (max-width: 1400px) {
            .insights-panel {
                width: 280px;
            }
        }

        @media (max-width: 1200px) {
            .stat-label {
                display: none;
            }
            
            .toolbar {
                overflow-x: auto;
            }
        }

        @media (max-width: 768px) {
            .insights-panel {
                display: none;
            }
            
            .heat-map-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header gpu">
        <h1 class="header-title">
            Activities Intelligence
            <div class="ml-indicator">ML Enhanced</div>
        </h1>
        
        <div class="header-stats">
            <div class="stat-item">
                <span class="stat-value" style="color: var(--priority-critical)">47</span>
                <span class="stat-label">Critical</span>
            </div>
            <div class="stat-item">
                <span class="stat-value">3,847</span>
                <span class="stat-label">Total Today</span>
            </div>
            <div class="stat-item">
                <span class="stat-value">92%</span>
                <span class="stat-label">Resolved</span>
            </div>
            <div class="stat-item">
                <span class="stat-value">1.8m</span>
                <span class="stat-label">Avg Response</span>
            </div>
        </div>
    </header>

    <!-- Toolbar -->
    <div class="toolbar gpu">
        <div class="toolbar-section">
            <div class="view-toggle">
                <button class="active" data-view="grid">GRID</button>
                <button data-view="heatmap">HEAT MAP</button>
                <button data-view="timeline">TIMELINE</button>
                <button data-view="analytics">ANALYTICS</button>
            </div>
        </div>

        <div class="toolbar-divider"></div>

        <div class="toolbar-section">
            <div class="control-group">
                <label class="control-label">Priority</label>
                <select id="priorityFilter">
                    <option value="all">All Priorities</option>
                    <option value="critical">Critical Only</option>
                    <option value="high">High & Above</option>
                    <option value="medium">Medium & Above</option>
                    <option value="active">Active Only</option>
                </select>
            </div>

            <div class="control-group">
                <label class="control-label">Time</label>
                <select id="timeFilter">
                    <option value="1h">Last Hour</option>
                    <option value="4h">Last 4 Hours</option>
                    <option value="12h">Last 12 Hours</option>
                    <option value="24h" selected>Last 24 Hours</option>
                    <option value="7d">Last 7 Days</option>
                </select>
            </div>

            <div class="control-group">
                <label class="control-label">Location</label>
                <select id="locationFilter">
                    <option value="all">All Locations</option>
                    <option value="alpha">Alpha Tower</option>
                    <option value="beta">Beta Complex</option>
                    <option value="gamma">Gamma Wing</option>
                    <option value="delta">Delta Center</option>
                </select>
            </div>
        </div>

        <div class="toolbar-divider"></div>

        <div class="toolbar-section" style="flex: 1;">
            <input type="search" placeholder="Search activities... (ID, type, location, description)" style="width: 100%;">
        </div>

        <div class="toolbar-section">
            <button>Export</button>
            <button class="primary">ML Analysis</button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="content">
        <!-- Data Grid View -->
        <div class="data-grid" id="gridView">
            <table class="data-table">
                <thead>
                    <tr>
                        <th style="width: 30px;"></th>
                        <th class="sortable" data-sort="id">ID</th>
                        <th class="sortable sorted-desc" data-sort="time">TIME</th>
                        <th class="sortable" data-sort="type">TYPE</th>
                        <th class="sortable" data-sort="location">LOCATION</th>
                        <th class="sortable" data-sort="priority">PRIORITY</th>
                        <th class="sortable" data-sort="status">STATUS</th>
                        <th>ASSIGNED</th>
                        <th class="sortable" data-sort="confidence">CONF%</th>
                        <th>RESPONSE</th>
                        <th>CAMERAS</th>
                        <th>ANOMALY</th>
                    </tr>
                </thead>
                <tbody id="dataTableBody">
                    <!-- Data rows will be rendered here -->
                </tbody>
            </table>
        </div>

        <!-- Heat Map View (Hidden by default) -->
        <div class="heat-map-container" id="heatmapView" style="display: none;">
            <!-- Heat map cells will be rendered here -->
        </div>

        <!-- Timeline View (Hidden by default) -->
        <div class="timeline-view" id="timelineView" style="display: none;">
            <div class="timeline-header">
                <h2>Activity Timeline</h2>
                <div class="timeline-scale">
                    <button class="scale-button active">Hour</button>
                    <button class="scale-button">Day</button>
                    <button class="scale-button">Week</button>
                </div>
            </div>
            <div class="timeline-track">
                <div class="timeline-axis"></div>
                <div id="timelineEntries">
                    <!-- Timeline entries will be rendered here -->
                </div>
            </div>
        </div>

        <!-- ML Insights Panel -->
        <aside class="insights-panel gpu">
            <div class="insights-header">
                <h3 class="insights-title">
                    ML Insights
                    <span style="font-size: 0.75rem; color: var(--color-text-tertiary); font-weight: 400;">Real-time</span>
                </h3>
                <button style="padding: 4px; background: transparent; border: none;">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="23 4 23 10 17 10"/>
                        <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
                    </svg>
                </button>
            </div>

            <div class="insights-content">
                <!-- Anomaly Score -->
                <div class="anomaly-score">
                    <div class="anomaly-gauge">
                        <svg width="60" height="60">
                            <circle cx="30" cy="30" r="25" class="anomaly-gauge-bg"/>
                            <circle cx="30" cy="30" r="25" class="anomaly-gauge-fill" id="anomalyGauge"/>
                        </svg>
                    </div>
                    <div class="anomaly-details">
                        <div class="anomaly-label">Anomaly Score</div>
                        <div class="anomaly-value" id="anomalyValue">72%</div>
                    </div>
                </div>

                <!-- Key Insights -->
                <div class="insight-card">
                    <div class="insight-type">Prediction</div>
                    <div class="insight-value">+23%</div>
                    <div class="insight-description">
                        Expected increase in South Sector activity over next 4 hours based on historical patterns.
                    </div>
                    <div class="insight-chart">
                        <canvas id="predictionChart"></canvas>
                    </div>
                </div>

                <div class="insight-card">
                    <div class="insight-type">Pattern Detection</div>
                    <div class="pattern-list">
                        <div class="pattern-item">
                            <div class="pattern-icon">üö™</div>
                            <div class="pattern-info">
                                <div class="pattern-name">Tailgating Spike</div>
                                <div class="pattern-count">47 incidents</div>
                            </div>
                            <div class="pattern-confidence">94%</div>
                        </div>
                        <div class="pattern-item">
                            <div class="pattern-icon">üïê</div>
                            <div class="pattern-info">
                                <div class="pattern-name">Shift Change Anomaly</div>
                                <div class="pattern-count">12 incidents</div>
                            </div>
                            <div class="pattern-confidence">87%</div>
                        </div>
                        <div class="pattern-item">
                            <div class="pattern-icon">üéØ</div>
                            <div class="pattern-info">
                                <div class="pattern-name">Coordinated Activity</div>
                                <div class="pattern-count">3 clusters</div>
                            </div>
                            <div class="pattern-confidence">76%</div>
                        </div>
                    </div>
                </div>

                <div class="insight-card">
                    <div class="insight-type">Risk Assessment</div>
                    <div class="insight-value" style="color: var(--sys-orange);">ELEVATED</div>
                    <div class="insight-description">
                        Multiple correlated events detected in Building C. Recommend increased patrol coverage.
                    </div>
                </div>

                <div class="insight-card">
                    <div class="insight-type">Resource Optimization</div>
                    <div class="insight-description">
                        Reallocating 3 guards from Zone A to Zone C would improve coverage by 18% based on current activity patterns.
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
        <button class="action-fab emergency" title="Emergency Protocol">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z"/>
            </svg>
        </button>
        <button class="action-fab" title="Create Report">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
                <line x1="16" y1="13" x2="8" y2="13"/>
                <line x1="16" y1="17" x2="8" y2="17"/>
                <polyline points="10 9 9 9 8 9"/>
            </svg>
        </button>
    </div>

    <script>
        // Enterprise Data Service with ML Integration
        class ActivityDataService {
            constructor() {
                this.activities = [];
                this.patterns = [];
                this.anomalies = [];
                this.initialize();
            }

            initialize() {
                // Generate large dataset with realistic patterns
                this.generateActivities(5000);
                this.detectPatterns();
                this.calculateAnomalies();
            }

            generateActivities(count) {
                const types = [
                    'TAILGATE_VIOLATION', 'UNAUTHORIZED_ACCESS', 'FORCED_ENTRY',
                    'BADGE_CLONE_ATTEMPT', 'PERIMETER_BREACH', 'DRONE_DETECTED',
                    'FACIAL_RECOGNITION_ALERT', 'VEHICLE_BLACKLIST', 'CROWD_FORMATION',
                    'SUSPICIOUS_PACKAGE', 'FIRE_ALARM', 'MEDICAL_EMERGENCY',
                    'EQUIPMENT_TAMPERING', 'NETWORK_INTRUSION', 'PANIC_BUTTON'
                ];

                const buildings = ['Alpha Tower', 'Beta Complex', 'Gamma Wing', 'Delta Center', 'Echo Plaza'];
                const zones = ['North', 'South', 'East', 'West', 'Central'];
                const floors = Array.from({ length: 20 }, (_, i) => `Floor ${i + 1}`);

                // Generate with temporal patterns
                const now = Date.now();
                for (let i = 0; i < count; i++) {
                    const timeOffset = Math.random() * 86400000; // 24 hours
                    const timestamp = new Date(now - timeOffset);
                    const hour = timestamp.getHours();
                    
                    // Simulate patterns
                    let typeIndex = Math.floor(Math.random() * types.length);
                    
                    // Higher tailgating during shift changes (8-9am, 5-6pm)
                    if ((hour === 8 || hour === 17) && Math.random() > 0.6) {
                        typeIndex = 0; // TAILGATE_VIOLATION
                    }
                    
                    // More emergencies during business hours
                    if (hour >= 9 && hour <= 17 && Math.random() > 0.8) {
                        typeIndex = types.indexOf('MEDICAL_EMERGENCY');
                    }

                    const priority = this.calculatePriority(types[typeIndex]);
                    const building = buildings[Math.floor(Math.random() * buildings.length)];
                    const zone = zones[Math.floor(Math.random() * zones.length)];
                    const floor = floors[Math.floor(Math.random() * floors.length)];

                    this.activities.push({
                        id: `INC-${String(i + 1).padStart(6, '0')}`,
                        timestamp,
                        type: types[typeIndex],
                        location: `${building} - ${zone} - ${floor}`,
                        building,
                        zone,
                        floor,
                        priority,
                        status: this.generateStatus(timestamp),
                        assignee: Math.random() > 0.4 ? `SEC-${Math.floor(Math.random() * 999) + 1}` : null,
                        confidence: Math.floor(Math.random() * 30) + 70,
                        responseTime: Math.floor(Math.random() * 300) + 30,
                        cameras: Math.floor(Math.random() * 4) + 1,
                        anomalyScore: this.calculateAnomalyScore(types[typeIndex], hour),
                        mlTags: this.generateMLTags(types[typeIndex])
                    });
                }

                this.activities.sort((a, b) => b.timestamp - a.timestamp);
            }

            calculatePriority(type) {
                const criticalTypes = ['FORCED_ENTRY', 'PERIMETER_BREACH', 'PANIC_BUTTON', 'FIRE_ALARM'];
                const highTypes = ['UNAUTHORIZED_ACCESS', 'BADGE_CLONE_ATTEMPT', 'DRONE_DETECTED', 'SUSPICIOUS_PACKAGE'];
                const mediumTypes = ['TAILGATE_VIOLATION', 'FACIAL_RECOGNITION_ALERT', 'CROWD_FORMATION', 'EQUIPMENT_TAMPERING'];
                
                if (criticalTypes.includes(type)) return 'critical';
                if (highTypes.includes(type)) return 'high';
                if (mediumTypes.includes(type)) return 'medium';
                return 'low';
            }

            generateStatus(timestamp) {
                const age = Date.now() - timestamp;
                if (age < 3600000) return 'new'; // Less than 1 hour
                if (age < 7200000) return 'active'; // Less than 2 hours
                return 'resolved';
            }

            calculateAnomalyScore(type, hour) {
                let score = Math.random() * 40 + 20; // Base 20-60
                
                // Unusual activity at night
                if ((hour < 6 || hour > 22) && type !== 'PATROL_CHECK') {
                    score += 30;
                }
                
                // Critical types always have higher anomaly scores
                if (['FORCED_ENTRY', 'BADGE_CLONE_ATTEMPT', 'NETWORK_INTRUSION'].includes(type)) {
                    score += 20;
                }
                
                return Math.min(Math.floor(score), 99);
            }

            generateMLTags(type) {
                const tags = [];
                
                if (Math.random() > 0.7) tags.push('pattern_detected');
                if (Math.random() > 0.8) tags.push('requires_review');
                if (Math.random() > 0.9) tags.push('correlated_event');
                if (type.includes('TAILGATE') && Math.random() > 0.6) tags.push('shift_change_related');
                
                return tags;
            }

            detectPatterns() {
                // Analyze activity distribution
                const typeCount = {};
                const hourlyDistribution = Array(24).fill(0);
                const buildingActivity = {};

                this.activities.forEach(activity => {
                    // Count by type
                    typeCount[activity.type] = (typeCount[activity.type] || 0) + 1;
                    
                    // Hourly distribution
                    const hour = activity.timestamp.getHours();
                    hourlyDistribution[hour]++;
                    
                    // Building activity
                    buildingActivity[activity.building] = (buildingActivity[activity.building] || 0) + 1;
                });

                // Identify patterns
                this.patterns = [
                    {
                        type: 'temporal',
                        name: 'Peak Hours',
                        description: 'Highest activity between 8-10 AM and 5-7 PM',
                        confidence: 92
                    },
                    {
                        type: 'spatial',
                        name: 'Hot Zones',
                        description: 'Beta Complex showing 40% more incidents than average',
                        confidence: 87
                    },
                    {
                        type: 'behavioral',
                        name: 'Tailgating Pattern',
                        description: 'Correlated tailgating attempts across multiple entrances',
                        confidence: 76
                    }
                ];
            }

            calculateAnomalies() {
                // Simple anomaly detection based on deviation from mean
                const avgPerHour = this.activities.length / 24;
                const hourlyCount = Array(24).fill(0);
                
                this.activities.forEach(activity => {
                    hourlyCount[activity.timestamp.getHours()]++;
                });
                
                // Find anomalous hours
                hourlyCount.forEach((count, hour) => {
                    const deviation = Math.abs(count - avgPerHour) / avgPerHour;
                    if (deviation > 0.5) {
                        this.anomalies.push({
                            hour,
                            count,
                            deviation: Math.floor(deviation * 100)
                        });
                    }
                });
            }

            getFilteredActivities(filters) {
                let filtered = [...this.activities];
                
                if (filters.priority && filters.priority !== 'all') {
                    if (filters.priority === 'active') {
                        filtered = filtered.filter(a => a.status === 'active' || a.status === 'new');
                    } else {
                        const priorityLevels = {
                            'critical': ['critical'],
                            'high': ['critical', 'high'],
                            'medium': ['critical', 'high', 'medium']
                        };
                        const allowedPriorities = priorityLevels[filters.priority] || [];
                        filtered = filtered.filter(a => allowedPriorities.includes(a.priority));
                    }
                }
                
                if (filters.time) {
                    const now = Date.now();
                    const timeRanges = {
                        '1h': 3600000,
                        '4h': 14400000,
                        '12h': 43200000,
                        '24h': 86400000,
                        '7d': 604800000
                    };
                    const range = timeRanges[filters.time] || 86400000;
                    filtered = filtered.filter(a => (now - a.timestamp) <= range);
                }
                
                if (filters.location && filters.location !== 'all') {
                    const locationMap = {
                        'alpha': 'Alpha Tower',
                        'beta': 'Beta Complex',
                        'gamma': 'Gamma Wing',
                        'delta': 'Delta Center'
                    };
                    const building = locationMap[filters.location];
                    if (building) {
                        filtered = filtered.filter(a => a.building === building);
                    }
                }
                
                if (filters.search) {
                    const search = filters.search.toLowerCase();
                    filtered = filtered.filter(a => 
                        a.id.toLowerCase().includes(search) ||
                        a.type.toLowerCase().includes(search) ||
                        a.location.toLowerCase().includes(search)
                    );
                }
                
                return filtered;
            }

            getHeatMapData() {
                const heatMap = {};
                
                this.activities.forEach(activity => {
                    const key = activity.building;
                    if (!heatMap[key]) {
                        heatMap[key] = {
                            name: key,
                            total: 0,
                            critical: 0,
                            high: 0,
                            zones: {}
                        };
                    }
                    
                    heatMap[key].total++;
                    if (activity.priority === 'critical') heatMap[key].critical++;
                    if (activity.priority === 'high') heatMap[key].high++;
                    
                    // Zone breakdown
                    if (!heatMap[key].zones[activity.zone]) {
                        heatMap[key].zones[activity.zone] = 0;
                    }
                    heatMap[key].zones[activity.zone]++;
                });
                
                return Object.values(heatMap);
            }
        }

        // UI Controller
        class ActivityUI {
            constructor(dataService) {
                this.dataService = dataService;
                this.currentView = 'grid';
                this.currentFilters = {
                    priority: 'all',
                    time: '24h',
                    location: 'all',
                    search: ''
                };
                this.sortConfig = {
                    column: 'time',
                    direction: 'desc'
                };
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.render();
                this.startRealtimeUpdates();
                this.updateMLInsights();
            }

            setupEventListeners() {
                // View toggle
                document.querySelectorAll('.view-toggle button').forEach(btn => {
                    btn.addEventListener('click', () => {
                        document.querySelectorAll('.view-toggle button').forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        this.currentView = btn.dataset.view;
                        this.render();
                    });
                });

                // Filters
                document.getElementById('priorityFilter').addEventListener('change', (e) => {
                    this.currentFilters.priority = e.target.value;
                    this.render();
                });

                document.getElementById('timeFilter').addEventListener('change', (e) => {
                    this.currentFilters.time = e.target.value;
                    this.render();
                });

                document.getElementById('locationFilter').addEventListener('change', (e) => {
                    this.currentFilters.location = e.target.value;
                    this.render();
                });

                // Search
                document.querySelector('input[type="search"]').addEventListener('input', (e) => {
                    this.currentFilters.search = e.target.value;
                    this.render();
                });

                // Sort columns
                document.addEventListener('click', (e) => {
                    if (e.target.matches('th.sortable')) {
                        const column = e.target.dataset.sort;
                        if (this.sortConfig.column === column) {
                            this.sortConfig.direction = this.sortConfig.direction === 'asc' ? 'desc' : 'asc';
                        } else {
                            this.sortConfig.column = column;
                            this.sortConfig.direction = 'desc';
                        }
                        this.render();
                    }
                });
            }

            render() {
                switch (this.currentView) {
                    case 'grid':
                        this.renderGrid();
                        break;
                    case 'heatmap':
                        this.renderHeatMap();
                        break;
                    case 'timeline':
                        this.renderTimeline();
                        break;
                    case 'analytics':
                        // Would render analytics view
                        break;
                }

                // Hide/show views
                document.getElementById('gridView').style.display = this.currentView === 'grid' ? 'block' : 'none';
                document.getElementById('heatmapView').style.display = this.currentView === 'heatmap' ? 'grid' : 'none';
                document.getElementById('timelineView').style.display = this.currentView === 'timeline' ? 'block' : 'none';
            }

            renderGrid() {
                const activities = this.dataService.getFilteredActivities(this.currentFilters);
                const sorted = this.sortActivities(activities);
                const tbody = document.getElementById('dataTableBody');
                
                // Update sort indicators
                document.querySelectorAll('th.sortable').forEach(th => {
                    th.classList.remove('sorted-asc', 'sorted-desc');
                    if (th.dataset.sort === this.sortConfig.column) {
                        th.classList.add(`sorted-${this.sortConfig.direction}`);
                    }
                });

                // Render rows (limited to 100 for performance)
                tbody.innerHTML = sorted.slice(0, 100).map((activity, index) => `
                    <tr data-id="${activity.id}" style="animation-delay: ${index * 10}ms">
                        <td><span class="priority-indicator priority-${activity.priority}"></span></td>
                        <td style="font-weight: 600;">${activity.id}</td>
                        <td>${this.formatTime(activity.timestamp)}</td>
                        <td>${this.formatType(activity.type)}</td>
                        <td title="${activity.location}">${activity.location}</td>
                        <td><span class="priority-indicator priority-${activity.priority}"></span>${activity.priority.toUpperCase()}</td>
                        <td><span class="status-badge status-${activity.status}">${activity.status}</span></td>
                        <td>${activity.assignee || '‚Äî'}</td>
                        <td>${activity.confidence}%</td>
                        <td>${activity.responseTime}s</td>
                        <td>${activity.cameras}</td>
                        <td style="color: ${this.getAnomalyColor(activity.anomalyScore)}">${activity.anomalyScore}%</td>
                    </tr>
                `).join('');

                // Update stats
                this.updateStats(activities);
            }

            renderHeatMap() {
                const heatMapData = this.dataService.getHeatMapData();
                const container = document.getElementById('heatmapView');
                
                container.innerHTML = heatMapData.map(building => {
                    const intensity = Math.min(Math.floor(building.total / 100) + 1, 5);
                    return `
                        <div class="heat-cell heat-intensity-${intensity}" data-building="${building.name}">
                            <div class="heat-cell-header">
                                <div class="heat-cell-title">${building.name}</div>
                                <div class="heat-cell-subtitle">${Object.keys(building.zones).length} active zones</div>
                            </div>
                            <div class="heat-cell-value">${building.total}</div>
                            <div style="position: relative; z-index: 1; display: flex; gap: 8px; justify-content: center; font-size: 0.75rem;">
                                ${building.critical > 0 ? `<span style="color: var(--priority-critical)">‚¨§ ${building.critical}</span>` : ''}
                                ${building.high > 0 ? `<span style="color: var(--priority-high)">‚¨§ ${building.high}</span>` : ''}
                            </div>
                        </div>
                    `;
                }).join('');
            }

            renderTimeline() {
                const activities = this.dataService.getFilteredActivities(this.currentFilters);
                const entries = document.getElementById('timelineEntries');
                
                // Group by hour
                const hourlyGroups = {};
                activities.forEach(activity => {
                    const hour = activity.timestamp.getHours();
                    if (!hourlyGroups[hour]) {
                        hourlyGroups[hour] = [];
                    }
                    hourlyGroups[hour].push(activity);
                });

                entries.innerHTML = Object.entries(hourlyGroups)
                    .sort((a, b) => b[0] - a[0])
                    .slice(0, 24)
                    .map(([hour, activities]) => `
                        <div class="timeline-entry">
                            <div class="timeline-marker">${hour}:00</div>
                            <div class="timeline-dot"></div>
                            <div class="timeline-content">
                                <div style="font-weight: 600; margin-bottom: 8px;">${activities.length} Activities</div>
                                <div style="display: flex; gap: 16px; font-size: 0.75rem; color: var(--color-text-tertiary);">
                                    <span>${activities.filter(a => a.priority === 'critical').length} Critical</span>
                                    <span>${activities.filter(a => a.priority === 'high').length} High</span>
                                    <span>${activities.filter(a => a.status === 'new').length} New</span>
                                </div>
                            </div>
                        </div>
                    `).join('');
            }

            sortActivities(activities) {
                const sorted = [...activities];
                const { column, direction } = this.sortConfig;
                
                sorted.sort((a, b) => {
                    let aVal = a[column];
                    let bVal = b[column];
                    
                    // Special handling for different types
                    if (column === 'time') {
                        aVal = a.timestamp.getTime();
                        bVal = b.timestamp.getTime();
                    } else if (column === 'priority') {
                        const priorityOrder = { critical: 0, high: 1, medium: 2, low: 3 };
                        aVal = priorityOrder[a.priority];
                        bVal = priorityOrder[b.priority];
                    }
                    
                    if (direction === 'asc') {
                        return aVal > bVal ? 1 : -1;
                    } else {
                        return aVal < bVal ? 1 : -1;
                    }
                });
                
                return sorted;
            }

            formatTime(date) {
                const now = new Date();
                const diff = now - date;
                const minutes = Math.floor(diff / 60000);
                
                if (minutes < 1) return 'NOW';
                if (minutes < 60) return `${minutes}m`;
                if (minutes < 1440) return `${Math.floor(minutes / 60)}h`;
                
                return date.toLocaleString('en-US', {
                    month: 'short',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit',
                    hour12: false
                });
            }

            formatType(type) {
                return type.replace(/_/g, ' ');
            }

            getAnomalyColor(score) {
                if (score >= 80) return 'var(--priority-critical)';
                if (score >= 60) return 'var(--priority-high)';
                if (score >= 40) return 'var(--priority-medium)';
                return 'var(--color-text-tertiary)';
            }

            updateStats(activities) {
                const critical = activities.filter(a => a.priority === 'critical').length;
                const total = activities.length;
                const resolved = activities.filter(a => a.status === 'resolved').length;
                const avgResponse = activities.reduce((sum, a) => sum + a.responseTime, 0) / activities.length;

                document.querySelector('.header-stats .stat-item:nth-child(1) .stat-value').textContent = critical;
                document.querySelector('.header-stats .stat-item:nth-child(2) .stat-value').textContent = total.toLocaleString();
                document.querySelector('.header-stats .stat-item:nth-child(3) .stat-value').textContent = 
                    Math.floor((resolved / total) * 100) + '%';
                document.querySelector('.header-stats .stat-item:nth-child(4) .stat-value').textContent = 
                    Math.floor(avgResponse / 60) + '.' + Math.floor((avgResponse % 60) / 6) + 'm';
            }

            updateMLInsights() {
                // Update anomaly gauge
                const anomalyScore = 72; // Would be calculated in real system
                const gauge = document.getElementById('anomalyGauge');
                const circumference = 2 * Math.PI * 25;
                const offset = circumference - (anomalyScore / 100) * circumference;
                gauge.style.strokeDashoffset = offset;

                document.getElementById('anomalyValue').textContent = anomalyScore + '%';

                // Simulate prediction chart
                this.drawPredictionChart();
            }

            drawPredictionChart() {
                const canvas = document.getElementById('predictionChart');
                if (!canvas) return;

                const ctx = canvas.getContext('2d');
                canvas.width = canvas.offsetWidth * 2;
                canvas.height = canvas.offsetHeight * 2;
                ctx.scale(2, 2);

                // Simple line chart
                const width = canvas.offsetWidth;
                const height = canvas.offsetHeight;
                const points = 20;
                const step = width / points;

                ctx.strokeStyle = 'var(--sys-blue)';
                ctx.lineWidth = 2;
                ctx.beginPath();

                for (let i = 0; i <= points; i++) {
                    const x = i * step;
                    const y = height / 2 + Math.sin(i * 0.5) * 20 + (i > 15 ? (i - 15) * 3 : 0);
                    
                    if (i === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                }

                ctx.stroke();

                // Prediction area
                ctx.fillStyle = 'rgba(59, 130, 246, 0.1)';
                ctx.lineTo(width, height);
                ctx.lineTo(15 * step, height);
                ctx.closePath();
                ctx.fill();
            }

            startRealtimeUpdates() {
                // Simulate real-time updates
                setInterval(() => {
                    // Add random new activity
                    if (Math.random() > 0.7) {
                        const newActivity = {
                            id: `INC-${String(Math.floor(Math.random() * 999999) + 1).padStart(6, '0')}`,
                            timestamp: new Date(),
                            type: 'REALTIME_ALERT',
                            location: 'Beta Complex - North - Floor 7',
                            building: 'Beta Complex',
                            zone: 'North',
                            floor: 'Floor 7',
                            priority: Math.random() > 0.8 ? 'critical' : 'high',
                            status: 'new',
                            assignee: null,
                            confidence: Math.floor(Math.random() * 20) + 80,
                            responseTime: 0,
                            cameras: 2,
                            anomalyScore: Math.floor(Math.random() * 30) + 70,
                            mlTags: ['realtime', 'requires_review']
                        };

                        this.dataService.activities.unshift(newActivity);
                        
                        // Re-render if on grid view
                        if (this.currentView === 'grid') {
                            this.render();
                        }
                    }

                    // Update ML insights
                    const newAnomaly = Math.floor(Math.random() * 20) + 60;
                    document.getElementById('anomalyValue').textContent = newAnomaly + '%';
                    
                    const gauge = document.getElementById('anomalyGauge');
                    const circumference = 2 * Math.PI * 25;
                    gauge.style.strokeDashoffset = circumference - (newAnomaly / 100) * circumference;
                }, 5000);
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            const dataService = new ActivityDataService();
            const ui = new ActivityUI(dataService);

            // Add row animations
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fadeInRow {
                    from {
                        opacity: 0;
                        transform: translateX(-10px);
                    }
                    to {
                        opacity: 1;
                        transform: translateX(0);
                    }
                }
                
                .data-table tbody tr {
                    animation: fadeInRow 0.3s ease-out forwards;
                    opacity: 0;
                }
            `;
            document.head.appendChild(style);
        });
    </script>
</body>
</html>