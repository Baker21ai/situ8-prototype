<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo Login Test - Situ8</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            border-bottom: 2px solid #3b82f6;
            padding-bottom: 10px;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 4px;
            border-left: 4px solid #3b82f6;
        }
        .test-button {
            margin: 5px;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: white;
        }
        .btn-admin { background: #dc2626; }
        .btn-admin:hover { background: #b91c1c; }
        .btn-guard { background: #2563eb; }
        .btn-guard:hover { background: #1d4ed8; }
        .btn-dev { background: #16a34a; }
        .btn-dev:hover { background: #15803d; }
        .output {
            margin-top: 20px;
            padding: 15px;
            background: #1e293b;
            color: #e2e8f0;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.5;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .info { color: #3b82f6; }
        .warning { color: #f59e0b; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ Situ8 Demo Login Test Suite</h1>
        
        <div class="test-section">
            <h2>Test Instructions</h2>
            <p>1. Open <a href="http://localhost:5173" target="_blank">http://localhost:5173</a> in a new tab</p>
            <p>2. Keep both this page and the app open side by side</p>
            <p>3. Open browser console (F12) in the app tab to see debug logs</p>
            <p>4. Click the test buttons below and observe the results</p>
        </div>

        <div class="test-section">
            <h2>Quick Tests</h2>
            <button class="test-button btn-admin" onclick="testDemoUser('demo-admin-001', 'Admin')">
                Test Admin Login
            </button>
            <button class="test-button btn-guard" onclick="testDemoUser('demo-guard-001', 'Security Officer')">
                Test Security Officer Login
            </button>
            <button class="test-button btn-dev" onclick="testDemoUser('demo-dev-001', 'Developer')">
                Test Developer Login
            </button>
        </div>

        <div class="test-section">
            <h2>Manual Console Commands</h2>
            <p>Copy and paste these commands into the browser console of the app:</p>
            <pre style="background: #f3f4f6; padding: 10px; border-radius: 4px;">
// Check auth state
const state = window.__ZUSTAND_DEVTOOLS_EXTENSION__?.stores?.get('user-storage')?.api?.getState() || JSON.parse(localStorage.getItem('situ8-user-store') || '{}')?.state;
console.log('Auth state:', {
  isAuthenticated: state?.isAuthenticated,
  user: state?.currentUser?.email,
  isDemoMode: state?.isDemoMode
});

// Test admin login
const switchUser = window.__ZUSTAND_DEVTOOLS_EXTENSION__?.stores?.get('user-storage')?.api?.getState()?.switchDemoUser;
if (switchUser) {
  switchUser('demo-admin-001').then(result => {
    console.log('Login result:', result);
  });
}
            </pre>
        </div>

        <div class="test-section">
            <h2>Test Output</h2>
            <div id="output" class="output">Test output will appear here...</div>
        </div>
    </div>

    <script>
        const output = document.getElementById('output');
        
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const className = type;
            output.innerHTML += `<span class="${className}">[${timestamp}] ${message}</span>\n`;
            output.scrollTop = output.scrollHeight;
        }

        function testDemoUser(userId, userName) {
            log(`\n========== Testing ${userName} Login ==========`, 'info');
            log(`User ID: ${userId}`, 'info');
            
            // Instructions for manual testing
            log('\nTo test this user:', 'warning');
            log(`1. Go to the app tab (http://localhost:5173)`, 'warning');
            log(`2. Click the "${userName} Access" button`, 'warning');
            log(`3. Watch for these indicators:`, 'warning');
            log(`   - Loading spinner should appear briefly`, 'info');
            log(`   - Login form should disappear`, 'info');
            log(`   - Main dashboard should appear with:`, 'info');
            log(`     ‚Ä¢ Header with user badge`, 'info');
            log(`     ‚Ä¢ Sidebar navigation`, 'info');
            log(`     ‚Ä¢ Command Center content`, 'info');
            log(`   - No error messages in console`, 'info');
            
            log('\nExpected console logs:', 'info');
            log(`  üéØ Demo user button clicked: ${userId}`, 'success');
            log(`  üîÑ switchDemoUser result: true`, 'success');
            log(`  ‚úÖ Login successful, calling onSuccess callback`, 'success');
            log(`  üîç App.tsx: Auth state: { isAuthenticated: true, user: ...}`, 'success');
            
            log('\nIf you see errors:', 'error');
            log(`  - "DEMO_USER_NOT_FOUND" means the user ID is wrong`, 'error');
            log(`  - "Demo mode not enabled" means demo mode isn't active`, 'error');
            log(`  - React hooks error means App.tsx has conditional returns before hooks`, 'error');
        }

        // Initial message
        log('Demo Login Test Suite Ready!', 'success');
        log('Follow the instructions above to test each demo user.', 'info');
    </script>
</body>
</html>